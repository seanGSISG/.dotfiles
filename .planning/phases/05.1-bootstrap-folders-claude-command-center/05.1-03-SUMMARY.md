---
phase: 05.1-bootstrap-folders-claude-command-center
plan: 03
subsystem: config
tags: [claude-code, chezmoi, hooks, age-encryption, mcp-servers, continuous-learning]

# Dependency graph
requires:
  - phase: 01-repository-foundation
    provides: age encryption setup at ~/.config/age/keys.txt
  - phase: 05.1-01
    provides: bootstrap folder structure with create_ prefix support
provides:
  - Claude Code hooks configuration with session and learning system hooks
  - continuous-learning-v2 skill with observation hooks, instinct management, and evolution pipeline
  - Age-encrypted MCP servers config with API keys (context7, exa_websearch, Lokka, codex)
affects: [05.1-04, bootstrap workflow, Claude Code session automation]

# Tech tracking
tech-stack:
  added: [continuous-learning-v2, age-encrypted MCP configs]
  patterns: [create_ prefix for initial-deploy configs, insights directory naming, hardcoded ~/.claude/ paths]

key-files:
  created:
    - create_dot_claude/hooks.json
    - create_dot_claude/settings.json
    - create_dot_claude/skills/continuous-learning-v2/SKILL.md
    - create_dot_claude/skills/continuous-learning-v2/config.json
    - create_dot_claude/skills/continuous-learning-v2/hooks/observe.sh
    - create_dot_claude/skills/continuous-learning-v2/scripts/instinct-cli.py
    - create_dot_claude/skills/continuous-learning-v2/agents/observer.md
    - create_dot_claude/skills/continuous-learning-v2/agents/start-observer.sh
    - dot_claude/encrypted_mcp-servers.json.age
  modified: []

key-decisions:
  - "Hardcoded ~/.claude/ paths in hook scripts (not CLAUDE_PLUGIN_ROOT)"
  - "insights directory name replaces homunculus for clarity"
  - "create_ prefix for ~/.claude/ configs (initial deploy only, preserves user edits)"
  - "No linting hooks - session + learning hooks only"
  - "Observer agent disabled by default (enabled: false)"
  - "MCP servers age-encrypted using existing key from Phase 1"

patterns-established:
  - "Session hooks: PreCompact, SessionStart, SessionEnd (state persistence)"
  - "Learning hooks: PreToolUse, PostToolUse (observation capture)"
  - "Instinct-based learning with confidence scoring (0.3-0.9)"
  - "Age encryption for secrets in chezmoi-managed configs"

# Metrics
duration: 4m 34s
completed: 2026-02-11
---

# Phase 05.1 Plan 03: Claude Code Configuration Summary

**Deployed Claude Code hooks, continuous-learning-v2 system with insights directory, and age-encrypted MCP servers config with API keys**

## Performance

- **Duration:** 4m 34s
- **Started:** 2026-02-11T22:48:48Z
- **Completed:** 2026-02-11T22:53:22Z
- **Tasks:** 2
- **Files modified:** 9

## Accomplishments
- hooks.json with 6 hook entries (PreToolUse, PostToolUse, PreCompact, SessionStart, 2x SessionEnd) - no linting/enforcement hooks
- continuous-learning-v2 skill adapted from reference with "insights" naming throughout (zero "homunculus" paths)
- Observer agent disabled by default, all scripts executable and syntax-validated
- MCP servers config age-encrypted with context7, exa_websearch, Lokka, and codex server configs

## Task Commits

Each task was committed atomically:

1. **Task 1: Create hooks.json, settings.json, and continuous-learning-v2 skill files** - `dd3ece1` (feat)
2. **Task 2: Create age-encrypted MCP servers configuration** - `0b859e2` (feat)

## Files Created/Modified
- `create_dot_claude/hooks.json` - Hook configuration (session + learning only, no linting)
- `create_dot_claude/settings.json` - Minimal global Claude Code settings
- `create_dot_claude/skills/continuous-learning-v2/SKILL.md` - Learning system documentation
- `create_dot_claude/skills/continuous-learning-v2/config.json` - Learning config with insights paths, observer disabled
- `create_dot_claude/skills/continuous-learning-v2/hooks/observe.sh` - PreToolUse/PostToolUse observation capture script
- `create_dot_claude/skills/continuous-learning-v2/scripts/instinct-cli.py` - CLI for instinct management (status, import, export, evolve)
- `create_dot_claude/skills/continuous-learning-v2/agents/observer.md` - Background observer agent specification
- `create_dot_claude/skills/continuous-learning-v2/agents/start-observer.sh` - Observer agent launcher script
- `dot_claude/encrypted_mcp-servers.json.age` - Age-encrypted MCP servers config

## Decisions Made
- **Hardcoded paths:** Used hardcoded ~/.claude/ paths in all hook scripts (not ${CLAUDE_PLUGIN_ROOT}) per user decision - standard Claude Code path, no indirection needed
- **insights naming:** Renamed all "homunculus" references to "insights" for clarity (only exception: GitHub repo reference link in SKILL.md)
- **No linting hooks:** Excluded all linting/enforcement hooks from reference (console.log checks, TypeScript validation, Prettier auto-format, tmux enforcement, git push reminders, markdown file blocking)
- **Observer disabled:** Set observer.enabled: false by default - observation hooks capture data, but background analysis is opt-in
- **create_ prefix strategy:** All ~/.claude/ files use create_ prefix so chezmoi deploys them only if they don't exist (preserves user edits)

## Deviations from Plan
None - plan executed exactly as written.

## Issues Encountered
None - all files created successfully, all scripts passed syntax validation, age encryption worked with existing key.

## User Setup Required
None - no external service configuration required. MCP server API keys are already stored in encrypted config (decrypts automatically on chezmoi apply).

## Next Phase Readiness
- Complete Claude Code configuration deployed to chezmoi source
- All hooks configured for session management and learning system
- MCP servers with API keys ready for use
- Ready for Plan 04 (workspace folder structure with CLAUDE.md boundary files)
- Ready for bootstrap.sh integration (Claude Code installation + chezmoi apply deployment)

---
*Phase: 05.1-bootstrap-folders-claude-command-center*
*Completed: 2026-02-11*
