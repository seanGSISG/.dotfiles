---
phase: 02-package-management-tool-inventory
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - ~/.local/share/chezmoi/uv-tools.txt
  - ~/.local/share/chezmoi/binary-installs.txt
autonomous: true

must_haves:
  truths:
    - "uv-tools.txt exists listing all Python CLI tools managed by uv"
    - "binary-installs.txt exists documenting all tools installed via official scripts or direct binaries"
    - "Each uv tool has a comment explaining its purpose"
    - "Each binary install entry includes name, source URL, version, and install method"
    - "Post-install requirements are annotated (shell integration, auth steps)"
    - "Auth-required tools have # auth: manual annotation"
    - "Node.js LTS version and Bun version are documented in binary-installs.txt"
  artifacts:
    - path: "~/.local/share/chezmoi/uv-tools.txt"
      provides: "Python CLI tool list for uv tool install"
      contains: "basedpyright"
    - path: "~/.local/share/chezmoi/binary-installs.txt"
      provides: "Binary/script install list with sources and methods"
      contains: "chezmoi"
  key_links:
    - from: "uv-tools.txt"
      to: "bootstrap.sh (Phase 5)"
      via: "Plain text, one tool per line, parsed by bash"
      pattern: "^[a-z].*#"
    - from: "binary-installs.txt"
      to: "bootstrap.sh (Phase 5)"
      via: "Structured format: name|source|version|method"
      pattern: "^[a-z].*\\|.*\\|.*\\|"
---

<objective>
Create uv-tools.txt (Python CLI tools) and binary-installs.txt (script/binary installs) documenting all non-apt tools needed for environment reproduction.

Purpose: These two files complete the "bill of materials" alongside apt-packages.txt. uv-tools.txt tracks Python tools installed in isolated environments via `uv tool install`. binary-installs.txt tracks tools installed via official install scripts or direct GitHub release binaries. Together with apt-packages.txt, these three files give the bootstrap script (Phase 5) a complete dependency manifest.
Output: Two files committed to the chezmoi repo — uv-tools.txt and binary-installs.txt.
</objective>

<execution_context>
@/home/vscode/.claude/get-shit-done/workflows/execute-plan.md
@/home/vscode/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-package-management-tool-inventory/02-CONTEXT.md
@.planning/phases/02-package-management-tool-inventory/02-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create uv-tools.txt from system discovery</name>
  <files>~/.local/share/chezmoi/uv-tools.txt</files>
  <action>
    1. Run `uv tool list` to discover currently installed uv-managed tools. Current system shows:
       - amplifier v0.1.0
       - basedpyright v1.36.1
       - cli-agent-orchestrator v0.1.2
       - kimi-cli v1.2
       - openhands v1.6.0

    2. Cross-reference with the known essential tools from CONTEXT.md and RESEARCH.md:
       - basedpyright (Python type checker — KEEP, explicitly required)
       - pre-commit (git hook framework — KEEP, explicitly required, already installed via pipx)
       - virtualenv (virtual environment creation — KEEP, explicitly required)
       - just (command runner — KEEP, explicitly required)
       - detect-secrets (secret scanning — KEEP, already installed via pipx in Phase 1)

    3. Curate: Decide which discovered tools to keep vs skip:
       - basedpyright — KEEP (essential dev tool)
       - amplifier — SKIP (experimental, not in requirements)
       - cli-agent-orchestrator — SKIP (experimental AI tool, not in requirements)
       - kimi-cli — SKIP (experimental AI tool, not in requirements)
       - openhands — SKIP (experimental AI tool, not in requirements)

    4. Create `uv-tools.txt` in ~/.local/share/chezmoi/ with this format:

       ```
       # uv-tools.txt — Python CLI tools managed by uv
       # Install with: uv tool install <name>
       # Consumed by: bootstrap.sh (Phase 5)
       #
       # uv isolates each tool in its own virtual environment
       # No version pins unless specific version matters
       # Post-install annotations tell bootstrap what setup is needed

       basedpyright     # Python type checker (actively maintained Pyright fork)
       detect-secrets   # Pre-commit hook for secret scanning
       # post-install: detect-secrets scan > .secrets.baseline
       pre-commit       # Git hook framework for code quality
       # post-install: pre-commit install (in each repo)
       virtualenv       # Virtual environment creation (used by pre-commit internally)
       just             # Command runner (Makefile alternative, Rust-based)
       ```

    5. Sort tools alphabetically within the file. Every tool gets an inline comment explaining purpose. Post-install annotations go on the line below.
  </action>
  <verify>
    - File exists: `ls ~/.local/share/chezmoi/uv-tools.txt`
    - Contains required tools: `grep -c "basedpyright\|pre-commit\|virtualenv\|just\|detect-secrets" ~/.local/share/chezmoi/uv-tools.txt` returns 5
    - Does NOT contain experimental tools: `grep -c "amplifier\|kimi\|openhands\|cli-agent" ~/.local/share/chezmoi/uv-tools.txt` returns 0
    - Every tool line has comment: non-blank, non-comment lines all have `#`
  </verify>
  <done>uv-tools.txt exists with 5 curated Python CLI tools (basedpyright, detect-secrets, pre-commit, virtualenv, just), each annotated with purpose and post-install requirements where applicable.</done>
</task>

<task type="auto">
  <name>Task 2: Create binary-installs.txt and commit both files</name>
  <files>~/.local/share/chezmoi/binary-installs.txt, ~/.local/share/chezmoi/uv-tools.txt, ~/.local/share/chezmoi/.chezmoiignore</files>
  <action>
    1. Create `binary-installs.txt` in ~/.local/share/chezmoi/ documenting tools installed via official install scripts or direct binaries. Use structured format: `name|source_url|version|method`.

       Current system versions for reference:
       - chezmoi v2.69.3 (official install script)
       - fnm (official install script, currently managing Node v24.11.0)
       - bun v1.3.4 (official install script)
       - starship (not yet installed — will be installed, official install script)
       - age v1.2.1 (GitHub release binary, already installed in Phase 1)
       - antidote (git clone, not yet installed — will be installed)
       - uv v0.9.25 (official install script)
       - Claude Code (npm global — installed via bun/npm after Node is available)

       ```
       # binary-installs.txt — Tools installed via official scripts or direct binaries
       # Format: name|source_url|version|method
       # Methods: script (curl|bash), binary (GitHub release), git (clone), npm (global install)
       # Consumed by: bootstrap.sh (Phase 5) — bootstrap owns the actual install logic
       #
       # Version: "latest" = always get newest, "vX.Y.Z+" = minimum version required
       # Post-install annotations tell bootstrap what setup is needed after install
       # Auth annotations indicate tools requiring manual login after install

       # === Package Managers & Toolchains ===

       uv|https://astral.sh/uv/install.sh|latest|script
       # Python package manager and tool installer (replaces pip, pipx)
       # post-install: shell integration automatic (adds to PATH via .local/bin)

       chezmoi|https://get.chezmoi.io|v2.69.3+|script
       # Dotfiles manager with templating and encryption
       # post-install: chezmoi init --apply (handled by bootstrap itself)

       # === JavaScript Runtimes ===

       fnm|https://fnm.vercel.app/install|latest|script
       # Fast Node Manager (40x faster than nvm, Rust-based)
       # post-install: eval "$(fnm env --use-on-cd --shell zsh)" in .zshrc
       # post-install: fnm install 22 && fnm default 22 (Node LTS)
       # note: Node.js LTS 22.x — fnm manages Node versions, not installed directly

       bun|https://bun.sh/install|v1.3.4+|script
       # JavaScript runtime, bundler, test runner, package manager (all-in-one)
       # Primary JS runtime for new projects; Node via fnm for compatibility
       # post-install: shell integration automatic

       # === Shell & Prompt ===

       starship|https://starship.rs/install.sh|latest|script
       # Cross-shell prompt with git, node, python, duration modules
       # post-install: eval "$(starship init zsh)" in .zshrc

       antidote|https://github.com/mattmc3/antidote|latest|git
       # Lightweight zsh plugin manager (replaces Oh My Zsh)
       # install: git clone --depth=1 to ~/.antidote
       # post-install: source ~/.antidote/antidote.zsh in .zshrc

       # === Security ===

       age|https://github.com/FiloSottile/age/releases|v1.2.1+|binary
       # Modern file encryption (used by chezmoi for secret management)
       # install: download binary from GitHub releases to ~/.local/bin/
       # post-install: none (key setup handled in Phase 1)

       # === Developer Tools ===

       claude-code|npm:@anthropic-ai/claude-code|latest|npm
       # Claude Code CLI (AI coding assistant)
       # install: bun install -g @anthropic-ai/claude-code (or npm)
       # auth: manual — run 'claude login' after install
       ```

    2. Update .chezmoiignore to include both new files (repo-only, not deployed to ~/):
       ```
       # Add to .chezmoiignore:
       uv-tools.txt
       binary-installs.txt
       ```

    3. Add and commit all files to the chezmoi git repo:
       ```bash
       cd ~/.local/share/chezmoi
       git add uv-tools.txt binary-installs.txt .chezmoiignore
       git commit -m "feat(02): add uv tools and binary install lists

       - uv-tools.txt: 5 Python CLI tools (basedpyright, detect-secrets, pre-commit, virtualenv, just)
       - binary-installs.txt: 8 tools with source URLs, versions, and install methods
       - Both files annotated with post-install requirements and auth steps
       - .chezmoiignore updated to exclude package lists from chezmoi apply"
       ```
  </action>
  <verify>
    - binary-installs.txt exists: `ls ~/.local/share/chezmoi/binary-installs.txt`
    - Has structured entries: `grep -cE "^[a-z].*\|.*\|.*\|" ~/.local/share/chezmoi/binary-installs.txt` returns 8
    - Contains all required tools: `grep -c "chezmoi\|fnm\|bun\|starship\|antidote\|age\|uv\|claude" ~/.local/share/chezmoi/binary-installs.txt` >= 8
    - Has Node LTS version documented: `grep -i "node.*lts\|node.*22\|fnm install" ~/.local/share/chezmoi/binary-installs.txt`
    - .chezmoiignore updated: `grep -c "uv-tools\|binary-installs" ~/.local/share/chezmoi/.chezmoiignore` returns 2
    - Committed: `cd ~/.local/share/chezmoi && git log --oneline -1` shows the commit
    - Not in chezmoi managed: `chezmoi managed | grep -c "uv-tools\|binary-installs"` returns 0
  </verify>
  <done>binary-installs.txt exists with 8 tools (uv, chezmoi, fnm, bun, starship, antidote, age, claude-code), each with source URL, version, install method, and post-install annotations. Both uv-tools.txt and binary-installs.txt committed and excluded from chezmoi apply. PKG-02 requirement satisfied.</done>
</task>

</tasks>

<verification>
1. `cat ~/.local/share/chezmoi/uv-tools.txt` shows 5 annotated Python tools
2. `cat ~/.local/share/chezmoi/binary-installs.txt` shows 8 annotated binary installs
3. Tool count: `grep -cE "^[a-z]" ~/.local/share/chezmoi/uv-tools.txt` returns 5
4. Binary count: `grep -cE "^[a-z].*\|" ~/.local/share/chezmoi/binary-installs.txt` returns 8
5. Node LTS documented: `grep "22" ~/.local/share/chezmoi/binary-installs.txt` finds the version
6. Auth annotations: `grep -c "auth: manual" ~/.local/share/chezmoi/binary-installs.txt` >= 1
7. Post-install annotations: `grep -c "post-install:" ~/.local/share/chezmoi/binary-installs.txt` >= 5
8. Both files committed: `cd ~/.local/share/chezmoi && git status` is clean
9. Neither in chezmoi managed: `chezmoi managed | grep -cE "uv-tools|binary-installs"` returns 0
</verification>

<success_criteria>
- uv-tools.txt exists with 5 curated Python tools, each annotated
- binary-installs.txt exists with 8 tools, each with source URL, version, method
- Post-install requirements are annotated for tools needing shell integration
- Auth-required tools (gh in apt-packages, claude-code) have auth annotations
- Node.js LTS version and Bun version are explicitly documented
- Both files committed and excluded from chezmoi apply
- PKG-02 requirement is satisfied
- PKG-03 requirement is partially satisfied (lists exist and are committed; full bootstrap consumption is Phase 5)
</success_criteria>

<output>
After completion, create `.planning/phases/02-package-management-tool-inventory/02-02-SUMMARY.md`
</output>
